{
  "version": 3,
  "sources": ["../src/index.ts", "../src/dom.ts", "../src/button.ts", "../src/time-picker.ts", "../src/default-options.ts", "../src/date-manip.ts", "../src/month-picker.ts", "../src/year-picker.ts", "../src/tiny-date-picker.ts", "../src/tiny-date-picker-flyout.ts"],
  "sourcesContent": ["export { defaultOptions } from './default-options';\nimport { defaultOptions } from './default-options';\nimport { TinyDatePickerOptions } from './types';\nimport { TinyDatePicker } from './tiny-date-picker';\n\nimport './index.css';\nimport { tinyDatePickerFlyout } from './tiny-date-picker-flyout';\n\n/**\n * Create a new instance of the date picker.\n *\n * @param {DatePickerOptions} opts The options for initializing the date picker\n * @returns {TinyDatePicker}\n */\nexport default function tinyDatePicker(opts?: Partial<TinyDatePickerOptions>) {\n  const options = Object.assign(defaultOptions(), opts);\n  options.lang = Object.assign(defaultOptions().lang, opts?.lang);\n  const picker = new TinyDatePicker(options);\n  if (options.input) {\n    tinyDatePickerFlyout(picker, options.input);\n  }\n  return picker;\n}\n", "/**\n * Determine if x is an object of html attributes. (e.g. { class: 'foo', onclick: () => {} })\n */\nconst isAttr = (x: any) =>\n  x &&\n  typeof x === 'object' &&\n  !Array.isArray(x) &&\n  !(x instanceof NodeList) &&\n  !(x instanceof Node) &&\n  !(x.el instanceof Node);\n\n/**\n * Assign the specified attributes to the element.\n */\nfunction assignAttrs(attrs: { [k: string]: any }, el: Element): Element {\n  if (el && attrs) {\n    Object.keys(attrs).forEach((k) => {\n      const val = attrs[k];\n      if (k === 'class' || k === 'className') {\n        const classes = val && val.trim().split(/[\\s]+/);\n        classes && classes.length && el.classList.add(...classes);\n      } else if (\n        k === 'innerHTML' ||\n        k === 'textContent' ||\n        typeof val === 'function' ||\n        k.startsWith('$')\n      ) {\n        (el as any)[k] = val;\n      } else if (val !== false && val !== undefined && val !== null) {\n        el.setAttribute(k, val);\n      }\n    });\n  }\n  return el;\n}\n\n/**\n * Append the specified children to the specified element.\n * @param children\n * @param el\n */\nfunction appendChildren(children: any, el: Element) {\n  if (!children) {\n    return;\n  }\n  if (!children.forEach) {\n    el.append(children);\n    return;\n  }\n  if (children.forEach) {\n    children.forEach((c: any) => appendChildren(c, el));\n    return;\n  }\n}\n\n/**\n * Create an element.\n * @param {string} tag the tag name and / or classes (e.g. span.bright)\n * @param  {...any} args attributes object, and / or child nodes, text content, etc.\n * @returns {Element}\n */\nexport function h<T extends HTMLElement>(tag: string, ...args: any): T {\n  const [tagName, ...classes] = tag.split('.');\n  const el = document.createElement(tagName || 'div');\n  const arg0 = args[0];\n  const attrs = isAttr(arg0) && arg0;\n  if (classes.length) {\n    el.className = classes.join(' ');\n  }\n  assignAttrs(attrs, el);\n  appendChildren(attrs ? args.slice(1) : args, el);\n  return (el as unknown) as T;\n}\n\n/**\n * Add event listener to the element, and return the dispose / off function.\n */\nexport function on<\n  K extends keyof HTMLElementEventMap,\n  T extends Pick<Element, 'addEventListener' | 'removeEventListener'>\n>(\n  el: T,\n  type: K,\n  fn: (this: T, ev: HTMLElementEventMap[K]) => any,\n  opts?: boolean | AddEventListenerOptions,\n): () => any;\nexport function on<T extends Pick<Element, 'addEventListener' | 'removeEventListener'>>(\n  el: T,\n  type: string,\n  fn: EventListenerOrEventListenerObject,\n  opts?: boolean | AddEventListenerOptions,\n): () => any;\nexport function on<T extends Pick<Element, 'addEventListener' | 'removeEventListener'>>(\n  el: T,\n  type: string,\n  fn: EventListenerOrEventListenerObject,\n  opts?: boolean | AddEventListenerOptions,\n): () => any {\n  el.addEventListener(type, fn as any, opts);\n  return () => el.removeEventListener(type, fn as any, opts);\n}\n\nconst skipTo = (n: number) => (e: any) => {\n  const nextNode = n > 0 ? 'nextElementSibling' : 'previousElementSibling';\n  let prev = e.target[nextNode];\n  for (let i = 0; prev && i < Math.abs(n) - 1; ++i) {\n    prev = prev[nextNode];\n  }\n  prev && prev.focus();\n};\n\nexport type Handlers = Record<string, undefined | ((e: any) => void)>;\n\n/**\n * Handle keykboard navigation in a target element.\n * @param numCols the number of columns the element contains\n * @param overrides key down handlers (optional)\n * @returns {EventHandler}\n */\nexport function keyboardNav(numCols: number, overrides?: Handlers) {\n  const handlers: Handlers = {\n    ArrowLeft: skipTo(-1),\n    ArrowUp: skipTo(-numCols),\n    ArrowRight: skipTo(1),\n    ArrowDown: skipTo(numCols),\n  };\n  return (e: any) => {\n    const fn = (overrides && overrides[e.code]) || handlers[e.code];\n    if (fn) {\n      e.preventDefault();\n      fn(e);\n    }\n  };\n}\n", "import { h } from './dom';\n\nexport function button(className: string, attrs: any, content: any) {\n  return h('button', { tabindex: -1, type: 'button', ...attrs, className }, content);\n}\n", "import { button } from './button';\nimport { h, on } from './dom';\nimport { TinyDatePicker } from './tiny-date-picker';\nimport { TinyDatePickerOptions } from './types';\n\nconst padNum = (n: number) => `00${n}`.slice(-2);\n\nconst toHH = (dt: Date, opts: TinyDatePickerOptions) => {\n  const is12Hr = opts.timeFormat === 12;\n  return `${dt.getHours() % (is12Hr ? 12 : 24) || (is12Hr ? 12 : 0)}`;\n};\n\nconst toMM = (dt: Date) => padNum(dt.getMinutes());\n\nconst onfocus = (e: any) => e.target.select();\n\nexport function toTimeString(dt: Date, opts: TinyDatePickerOptions) {\n  const suffix = opts.timeFormat === 24 ? '' : dt.getHours() >= 12 ? ' PM' : ' AM';\n  return toHH(dt, opts) + ':' + toMM(dt) + suffix;\n}\n\nfunction extractTime(opts: TinyDatePickerOptions, date: Date) {\n  const hours = date.getHours();\n  const hh = toHH(date, opts);\n  const mm = toMM(date);\n  const ampm = hours >= 12 ? 'pm' : 'am';\n\n  return { hh, mm, ampm };\n}\n\nfunction adjustHours(time: ReturnType<typeof extractTime>, is12Hr: boolean) {\n  const hh = parseInt(time.hh || '0', 10);\n  if (!is12Hr) {\n    return hh;\n  }\n  return (hh % 12) + (time.ampm === 'pm' ? 12 : 0);\n}\n\nexport function renderTimePicker(picker: TinyDatePicker) {\n  const { opts } = picker;\n  const { lang } = opts;\n  const is12Hr = opts.timeFormat === 12;\n  const time = extractTime(opts, picker.selectedDate || picker.currentDate);\n  const setCurrentDate = () => {\n    const dt = new Date(picker.currentDate);\n    dt.setHours(adjustHours(time, is12Hr), parseInt(time.mm || '0', 10));\n    picker.goto(dt);\n  };\n\n  const onkeydown = (e: any) => {\n    if (e.code === 'Enter') {\n      e.preventDefault();\n      e.target.onchange(e);\n      picker.apply();\n    }\n  };\n\n  const txtHH = h<HTMLInputElement>('input.dp-txt-time.dp-txt-hh', {\n    type: 'text',\n    placeholder: 'hh',\n    maxlength: 2,\n    onfocus,\n    onkeydown,\n    onchange(e: any) {\n      time.hh = e.target.value;\n      setCurrentDate();\n    },\n    value: time.hh,\n  });\n\n  const txtMM = h<HTMLInputElement>('input.dp-txt-time.dp-txt-mm', {\n    placeholder: 'mm',\n    type: 'text',\n    maxlength: 2,\n    onfocus,\n    onkeydown,\n    onchange(e: any) {\n      time.mm = e.target.value;\n      setCurrentDate();\n    },\n    value: time.mm,\n  });\n\n  const btnAMPM = button(\n    'dp-ampm',\n    {\n      tabindex: 'auto',\n      onclick(e: any) {\n        time.ampm = time.ampm === 'pm' ? 'am' : 'pm';\n        e.target.textContent = time.ampm;\n        setCurrentDate();\n      },\n    },\n    time.ampm,\n  );\n\n  const el = h(\n    'footer.dp-time-footer',\n    txtHH,\n    ':',\n    txtMM,\n    is12Hr ? btnAMPM : '',\n    lang.applyText &&\n      button(\n        'dp-apply',\n        {\n          tabindex: 'auto',\n          onclick() {\n            picker.apply();\n          },\n        },\n        lang.applyText,\n      ),\n  );\n\n  on(picker.root, 'selecteddatechange', () => {\n    if (picker.selectedDate) {\n      Object.assign(time, extractTime(picker.opts, picker.selectedDate));\n      txtHH.value = time.hh;\n      txtMM.value = time.mm;\n      btnAMPM.textContent = time.ampm;\n    }\n  });\n\n  return el;\n}\n", "import { toTimeString } from './time-picker';\nimport { TinyDatePickerOptions } from './types';\n\nexport function defaultOptions() {\n  const opts: TinyDatePickerOptions = {\n    lang: {\n      applyText: 'Apply',\n      days: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n      months: [\n        'January',\n        'February',\n        'March',\n        'April',\n        'May',\n        'June',\n        'July',\n        'August',\n        'September',\n        'October',\n        'November',\n        'December',\n      ],\n    },\n\n    timeFormat: 12,\n\n    highlightedDate: new Date(),\n\n    format(dt) {\n      return (\n        dt.getMonth() +\n        1 +\n        '/' +\n        dt.getDate() +\n        '/' +\n        dt.getFullYear() +\n        (opts.pickTime ? ' ' + toTimeString(dt, opts) : '')\n      );\n    },\n\n    parse(str) {\n      const date: any = new Date(str);\n      return isNaN(date) ? undefined : date;\n    },\n\n    dateClass() {\n      return '';\n    },\n\n    inRange(dt) {\n      const { min, max } = opts;\n      return (!min || dt >= min) && (!max || dt <= max);\n    },\n\n    appendTo: document.body,\n\n    dayOffset: 0,\n  };\n\n  return opts;\n}\n", "/**\n * A generic set of mutation-free date functions.\n */\n\n/**\n * now returns the current date without any time values\n *\n * @returns {Date}\n */\nexport function now() {\n  var dt = new Date();\n  dt.setHours(0, 0, 0, 0);\n  return dt;\n}\n\n/**\n * dateEq compares two dates\n *\n * @param {Date} date1 the first date\n * @param {Date} date2 the second date\n * @returns {boolean}\n */\nexport function datesEq(date1?: Date, date2?: Date) {\n  return (date1 && date1.toDateString()) === (date2 && date2.toDateString());\n}\n\n/**\n * shiftDay shifts the specified date by n days\n *\n * @param {Date} dt\n * @param {number} n\n * @returns {Date}\n */\nexport function shiftDay(dt: Date, n: number) {\n  dt = new Date(dt);\n  dt.setDate(dt.getDate() + n);\n  return dt;\n}\n\n/**\n * shiftMonth shifts the specified date by a specified number of months\n *\n * @param {Date} dt\n * @param {number} n\n * @param {boolean} wrap optional, if true, does not change year\n *                       value, defaults to false\n * @returns {Date}\n */\nexport function shiftMonth(dt: Date, n: number, wrap?: boolean) {\n  dt = new Date(dt);\n\n  var dayOfMonth = dt.getDate();\n  var month = dt.getMonth() + n;\n\n  dt.setDate(1);\n  dt.setMonth(wrap ? (12 + month) % 12 : month);\n  dt.setDate(dayOfMonth);\n\n  // If dayOfMonth = 31, but the target month only has 30 or 29 or whatever...\n  // head back to the max of the target month\n  if (dt.getDate() < dayOfMonth) {\n    dt.setDate(0);\n  }\n\n  return dt;\n}\n\n/**\n * shiftYear shifts the specified date by n years\n *\n * @param {Date} dt\n * @param {number} n\n * @returns {Date}\n */\nexport function shiftYear(dt: Date, n: number) {\n  dt = new Date(dt);\n  dt.setFullYear(dt.getFullYear() + n);\n  return dt;\n}\n\n/**\n * setYear changes the specified date to the specified year\n *\n * @param {Date} dt\n * @param {number} year\n */\nexport function setYear(dt: Date, year: number) {\n  dt = new Date(dt);\n  dt.setFullYear(year);\n  return dt;\n}\n\n/**\n * setMonth changes the specified date to the specified month\n *\n * @param {Date} dt\n * @param {number} month\n */\nexport function setMonth(dt: Date, month: number) {\n  return shiftMonth(dt, month - dt.getMonth());\n}\n\n/**\n * constrainDate returns dt or min/max depending on whether dt is out of bounds (inclusive)\n *\n * @export\n * @param {Date} dt\n * @param {Date} min\n * @param {Date} max\n * @returns {Date}\n */\nexport function constrainDate(dt?: Date, min?: Date, max?: Date) {\n  return !dt ? dt : min && dt < min ? min : max && dt > max ? max : dt;\n}\n", "import { button } from './button';\nimport { setMonth } from './date-manip';\nimport { h, keyboardNav } from './dom';\nimport { TinyDatePicker } from './tiny-date-picker';\n\nexport function showMonthPicker(picker: TinyDatePicker) {\n  const { opts, currentDate } = picker;\n  const { months } = opts.lang;\n  const currentMonth = currentDate.getMonth();\n  const monthPicker = h(\n    '.dp-months.dp-submenu',\n    {\n      onclick: (e: Event) => e.stopPropagation(),\n      onkeydown: keyboardNav(3),\n    },\n    months.map((month, i) => {\n      return button(\n        `dp-month${currentMonth === i ? ' dp-selected' : ''}`,\n        { onclick: () => picker.goto(setMonth(currentDate, i)) },\n        month,\n      );\n    }),\n  );\n\n  picker.submenu(monthPicker);\n\n  const current = monthPicker.querySelector<HTMLButtonElement>('.dp-selected');\n  current && current.focus();\n}\n", "import { button } from './button';\nimport { now, setYear, shiftYear } from './date-manip';\nimport { h, keyboardNav } from './dom';\nimport { TinyDatePicker } from './tiny-date-picker';\n\nfunction years(picker: TinyDatePicker) {\n  const result: number[] = [];\n  const { max, min } = picker.opts;\n  const maxYear = (max ? new Date(max) : shiftYear(now(), 25)).getFullYear();\n  const minYear = (min ? new Date(min) : shiftYear(now(), -25)).getFullYear();\n\n  for (let i = minYear; i <= maxYear; ++i) {\n    result.push(i);\n  }\n\n  return result;\n}\n\nexport function showYearPicker(picker: TinyDatePicker) {\n  const { currentDate, selectedDate } = picker;\n  const currentYear = currentDate.getFullYear();\n  const selectedYear = selectedDate?.getFullYear();\n  const yearPicker = h(\n    '.dp-years.dp-submenu',\n    { onclick: (e: Event) => e.stopPropagation(), onkeydown: keyboardNav(1) },\n    years(picker).map((year) => {\n      return button(\n        `dp-year${currentYear === year ? ' dp-selected' : ''}${\n          selectedYear === year ? ' dp-selected' : ''\n        }`,\n        { onclick: () => picker.goto(setYear(currentDate, year)) },\n        year,\n      );\n    }),\n  );\n\n  picker.submenu(yearPicker);\n  const current = yearPicker.querySelector<HTMLButtonElement>('.dp-selected');\n  current && current.focus();\n}\n", "import { button } from './button';\nimport { constrainDate, datesEq, now, shiftDay, shiftMonth } from './date-manip';\nimport { h, keyboardNav, on } from './dom';\nimport { showMonthPicker } from './month-picker';\nimport { renderTimePicker } from './time-picker';\nimport { TinyDatePickerOptions } from './types';\nimport { showYearPicker } from './year-picker';\n\nfunction calArray(currentDate: Date, dayOffset: number) {\n  // return result;\n  const result: Date[] = [];\n  let iter = new Date(currentDate);\n\n  // Move iter back to the start of the week as defined by dayOffset\n  iter.setDate(1);\n  iter.setDate(1 - iter.getDay() + dayOffset);\n\n  // If we are showing monday as the 1st of the week,\n  // and the monday is the 2nd of the month, the sunday\n  // won't show, so we need to shift backwards.\n  if (dayOffset && iter.getDate() === dayOffset + 1) {\n    iter.setDate(dayOffset - 6);\n  }\n\n  // We are going to have 6 weeks always displayed to keep a consistent\n  // calendar size\n  for (let day = 0; day < 6 * 7; ++day) {\n    result.push(new Date(iter));\n    iter.setDate(iter.getDate() + 1);\n  }\n\n  return result;\n}\n\nfunction dpbody(\n  picker: TinyDatePicker,\n  direction: 'dp-body-next' | 'dp-body-prev' | '',\n): HTMLElement {\n  const { opts, currentDate, selectedDate } = picker;\n  const { days, months } = opts.lang;\n  const highlightedMonth = currentDate.getMonth();\n  const today = now();\n  return h(\n    `.dp-body.${direction}`,\n    h(\n      'header.dp-cal-header',\n      button(\n        'dp-cal-month',\n        {\n          onclick: (e: Event) => {\n            e.stopPropagation();\n            showMonthPicker(picker);\n          },\n        },\n        months[highlightedMonth],\n      ),\n      button(\n        'dp-cal-year',\n        {\n          onclick: (e: Event) => {\n            e.stopPropagation();\n            showYearPicker(picker);\n          },\n        },\n        currentDate.getFullYear(),\n      ),\n    ),\n    h(\n      '.dp-days',\n      {\n        onkeydown: keyboardNav(7, {\n          ArrowLeft(e) {\n            picker.goto(shiftDay(new Date(parseInt(e.target.dataset.date)), -1));\n          },\n          ArrowUp(e) {\n            picker.goto(shiftDay(new Date(parseInt(e.target.dataset.date)), -7));\n          },\n          ArrowRight(e) {\n            picker.goto(shiftDay(new Date(parseInt(e.target.dataset.date)), 1));\n          },\n          ArrowDown(e) {\n            picker.goto(shiftDay(new Date(parseInt(e.target.dataset.date)), 7));\n          },\n        }),\n      },\n      days.map((_, i) => h('span.dp-col-header', days[(i + opts.dayOffset) % days.length])),\n      calArray(currentDate, opts.dayOffset).map((date) => {\n        const isNotInMonth = date.getMonth() !== highlightedMonth;\n        const isDisabled = !opts.inRange(date);\n        const isToday = datesEq(date, today);\n        const isCurrent = datesEq(date, currentDate);\n        const isSelected = datesEq(date, selectedDate);\n        const className =\n          'dp-day' +\n          (isNotInMonth ? ' dp-edge-day' : '') +\n          (isCurrent ? ' dp-current' : '') +\n          (isSelected ? ' dp-selected' : '') +\n          (isDisabled ? ' dp-day-disabled' : '') +\n          (isToday ? ' dp-day-today' : '') +\n          opts.dateClass(date);\n        return button(\n          className,\n          {\n            disabled: isDisabled,\n            onclick() {\n              opts.pickTime ? picker.setSelectedDate(date) : picker.apply(date);\n            },\n            tabindex: isCurrent ? '' : -1,\n            'data-date': date.getTime(),\n          },\n          date.getDate(),\n        );\n      }),\n    ),\n  );\n}\n\nfunction render(picker: TinyDatePicker): HTMLElement {\n  return h(\n    '.dp-cal',\n    { tabindex: -1 },\n    h('.dp-cal-header-placeholder'),\n    button(\n      'dp-prev',\n      { onclick: () => picker.goto(shiftMonth(picker.currentDate, -1)), 'aria-label': 'Prev' },\n      '\u2039',\n    ),\n    button(\n      'dp-next',\n      { onclick: () => picker.goto(shiftMonth(picker.currentDate, 1)), 'aria-label': 'Next' },\n      '\u203A',\n    ),\n    dpbody(picker, ''),\n  );\n}\n\nexport class TinyDatePicker {\n  opts: TinyDatePickerOptions;\n  currentDate: Date;\n  selectedDate?: Date;\n  root: HTMLElement;\n\n  constructor(opts: TinyDatePickerOptions) {\n    this.opts = opts;\n    this.currentDate = opts.highlightedDate;\n    this.root = render(this);\n\n    if (opts.pickTime) {\n      this.root.append(renderTimePicker(this));\n    }\n\n    on(this.root, 'click', () => this.submenu());\n  }\n\n  private redraw(body: Element) {\n    this.root.querySelector('.dp-body')!.replaceWith(body);\n    this.submenu();\n  }\n\n  setOpts(opts: TinyDatePickerOptions) {\n    Object.assign(this.opts, opts);\n    this.selectedDate = constrainDate(this.selectedDate, opts.min, opts.max);\n    this.currentDate = constrainDate(this.currentDate, opts.min, opts.max)!;\n    this.redraw(dpbody(this, ''));\n  }\n\n  submenu(el?: Element) {\n    const submenus = this.root.querySelectorAll('.dp-submenu');\n    if (!el && !submenus.length) {\n      return;\n    }\n    submenus.forEach((el) => el.remove());\n    if (el) {\n      this.root.appendChild(el);\n    } else {\n      this.root.querySelector<HTMLButtonElement>('.dp-current')!.focus();\n    }\n  }\n\n  goto(date: Date) {\n    const changed = this.currentDate !== date;\n    const isNext = this.currentDate < date;\n    const noTransition =\n      this.currentDate.getMonth() === date.getMonth() &&\n      this.currentDate.getFullYear() === date.getFullYear();\n    this.currentDate = date;\n    this.redraw(dpbody(this, noTransition ? '' : isNext ? 'dp-body-next' : 'dp-body-prev'));\n    changed && this.root.dispatchEvent(new CustomEvent('currentdatechange', { detail: date }));\n    setTimeout(() => {\n      if (!this.root.contains(document.activeElement)) {\n        this.root.querySelector<HTMLButtonElement>('.dp-current')!.focus();\n      }\n    });\n  }\n\n  setSelectedDate(date?: Date) {\n    this.selectedDate = constrainDate(date || this.currentDate, this.opts.min, this.opts.max)!;\n    this.goto(this.selectedDate);\n    this.root.dispatchEvent(new CustomEvent('selecteddatechange', { detail: this.selectedDate }));\n  }\n\n  apply(date?: Date) {\n    this.setSelectedDate(date);\n    this.root.dispatchEvent(new CustomEvent('apply', { detail: this }));\n  }\n}\n", "import { h, on } from './dom';\nimport { TinyDatePicker } from './tiny-date-picker';\n\nexport function tinyDatePickerFlyout(picker: TinyDatePicker, input: HTMLInputElement) {\n  const { root, opts } = picker;\n  let offs: Array<() => void> = [];\n\n  const hide = () => {\n    offs.forEach((f) => f());\n    offs = [];\n    root.remove();\n  };\n\n  const tabCatcher = () =>\n    h('.tab-catcher', {\n      tabindex: '0',\n      onfocus() {\n        input.focus();\n        hide();\n      },\n    });\n\n  const show = () => {\n    if (!root.isConnected) {\n      picker.setSelectedDate(picker.opts.parse(input.value));\n      root.classList.add('dp-flyout');\n      opts.appendTo.append(root);\n      autoPosition(input, picker);\n      root.querySelector<HTMLButtonElement>('.dp-current')!.focus();\n      offs = [\n        on(\n          document.body,\n          'focus',\n          (e: any) => {\n            if (e.target !== document.body && e.target !== input && !root.contains(e.target)) {\n              hide();\n            }\n          },\n          true,\n        ),\n        on(document.body, 'mousedown', (e: any) => {\n          if (e.target !== input && !root.contains(e.target)) {\n            hide();\n          }\n        }),\n      ];\n    }\n  };\n\n  root.prepend(tabCatcher());\n  root.append(tabCatcher());\n\n  on(input, 'click', show);\n  on(input, 'focus', show);\n\n  on(root, 'apply', () => {\n    input.value = picker.selectedDate ? opts.format(picker.selectedDate) : '';\n    input.focus();\n    hide();\n  });\n}\n\nfunction autoPosition(input: HTMLElement, picker: TinyDatePicker) {\n  const margin = 8;\n  const htm = document.documentElement;\n  const el = picker.root;\n  const scrollX = window.scrollX;\n  const scrollY = window.scrollY;\n  const inputBounds = input.getBoundingClientRect();\n  const bounds = el.getBoundingClientRect();\n  const left = inputBounds.left + scrollX;\n  const top = inputBounds.bottom + scrollY + margin;\n  let x: Partial<CSSStyleDeclaration> = { left: `${left}px` };\n  let y: Partial<CSSStyleDeclaration> = { top: `${top + margin}px` };\n\n  if (top + bounds.height > htm.clientHeight + scrollY) {\n    y = { top: `${Math.max(margin, scrollY + inputBounds.top - margin - bounds.height)}px` };\n  }\n  if (left + bounds.width > htm.clientWidth + scrollX) {\n    x = { left: `${Math.max(margin, scrollX + htm.clientWidth - bounds.width - margin)}px` };\n  }\n\n  Object.assign(el.style, y, x);\n  picker.root.style.visibility = '';\n}\n"],
  "mappings": "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",
  "names": []
}
